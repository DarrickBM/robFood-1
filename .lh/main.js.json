{
    "sourceFile": "main.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 18,
            "patches": [
                {
                    "date": 1648773273599,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1648774340495,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,12 +8,19 @@\n // var appName = \"盒马\";\n // launchApp(appName);\n // sleep(3000);\n \n-const settle = id(\"button_cart_charge\").findOne() // 结算按钮\n // const settleText = textStartsWith(\"结算\").exists() // 结算按钮是否存在\n-const settleText = id(\"button_cart_charge\").exists() // 结算按钮是否存在\n-toast(settleText)\n+const hasSettle = id(\"button_cart_charge\").exists() // 结算按钮是否存在\n+\n+// 点击结算按钮\n+const clickSettle = () => {\n+\tconst settle = id(\"button_cart_charge\").findOne() // 结算按钮\n+\tsettle.click();\n+}\n+\n+textStartsWith(\"非常抱歉，当前商品运力不足(063)\").exists() // 是否存在指定文本\n+\n // while (true) {\n \t// if (!settle) {\n \t// \ttoast('没找到结算按钮')\n \t// \t// continue\n"
                },
                {
                    "date": 1648774399474,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,9 +18,12 @@\n \tsettle.click();\n }\n \n textStartsWith(\"非常抱歉，当前商品运力不足(063)\").exists() // 是否存在指定文本\n+textStartsWith(\"提交订单\").exists() // 是否存在指定文本\n+textStartsWith(\"结算\").exists() // 是否存在指定文本\n \n+\n // while (true) {\n \t// if (!settle) {\n \t// \ttoast('没找到结算按钮')\n \t// \t// continue\n"
                },
                {
                    "date": 1648774406713,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,8 +22,29 @@\n textStartsWith(\"提交订单\").exists() // 是否存在指定文本\n textStartsWith(\"结算\").exists() // 是否存在指定文本\n \n \n+\n+\n+\n+\n+\n+\n+\n+\n+\n+\n+\n+\n+\n+\n+\n+\n+\n+\n+\n+\n+\n // while (true) {\n \t// if (!settle) {\n \t// \ttoast('没找到结算按钮')\n \t// \t// continue\n"
                },
                {
                    "date": 1648774422477,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,16 +1,10 @@\n-// text(\"auto\").waitFor()\n-// text(\"发送\").exists()\n-// UiSelector.findOne()\n-\n-// toast(desc('结算').find())\n-\n-auto.waitFor()\n // var appName = \"盒马\";\n // launchApp(appName);\n // sleep(3000);\n+auto.waitFor()\n \n-// const settleText = textStartsWith(\"结算\").exists() // 结算按钮是否存在\n+\n const hasSettle = id(\"button_cart_charge\").exists() // 结算按钮是否存在\n \n // 点击结算按钮\n const clickSettle = () => {\n"
                },
                {
                    "date": 1648774427652,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,5 @@\n-// var appName = \"盒马\";\n+// const appName = \"盒马\";\n // launchApp(appName);\n // sleep(3000);\n auto.waitFor()\n \n"
                },
                {
                    "date": 1648774969278,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,12 +15,25 @@\n textStartsWith(\"非常抱歉，当前商品运力不足(063)\").exists() // 是否存在指定文本\n textStartsWith(\"提交订单\").exists() // 是否存在指定文本\n textStartsWith(\"结算\").exists() // 是否存在指定文本\n \n+const hasBtn = (text) => {\n+\treturn textStartsWith(text).exists() // 是否存在指定文本\n+}\n \n \n+const start = () => {\n+\t// 是否有结算按钮\n+\tif (hasBtn(\"结算\")) {\n+\t\t// 点击结算\n+\t\tclickSettle()\n+\t\tsleep(100)\n+\t} else {\n \n+\t}\n+}\n \n+start()\n \n \n \n \n@@ -37,8 +50,9 @@\n \n \n \n \n+\n // while (true) {\n \t// if (!settle) {\n \t// \ttoast('没找到结算按钮')\n \t// \t// continue\n"
                },
                {
                    "date": 1648774986531,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,9 +25,9 @@\n \t// 是否有结算按钮\n \tif (hasBtn(\"结算\")) {\n \t\t// 点击结算\n \t\tclickSettle()\n-\t\tsleep(100)\n+\t\tsleep(500)\n \t} else {\n \n \t}\n }\n"
                },
                {
                    "date": 1648775066603,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,21 +15,21 @@\n textStartsWith(\"非常抱歉，当前商品运力不足(063)\").exists() // 是否存在指定文本\n textStartsWith(\"提交订单\").exists() // 是否存在指定文本\n textStartsWith(\"结算\").exists() // 是否存在指定文本\n \n-const hasBtn = (text) => {\n+const hasText = (text) => {\n \treturn textStartsWith(text).exists() // 是否存在指定文本\n }\n \n \n const start = () => {\n \t// 是否有结算按钮\n-\tif (hasBtn(\"结算\")) {\n+\tif (hasText(\"结算\")) {\n \t\t// 点击结算\n \t\tclickSettle()\n \t\tsleep(500)\n-\t} else {\n-\n+\t} else if (hasText('非常抱歉，当前商品运力不足(063)')) {\n+\t\t// 返回上一页\n \t}\n }\n \n start()\n"
                },
                {
                    "date": 1648775129793,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,8 +28,9 @@\n \t\tclickSettle()\n \t\tsleep(500)\n \t} else if (hasText('非常抱歉，当前商品运力不足(063)')) {\n \t\t// 返回上一页\n+\t\tback()\n \t}\n }\n \n start()\n"
                },
                {
                    "date": 1648775196577,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,11 +26,14 @@\n \tif (hasText(\"结算\")) {\n \t\t// 点击结算\n \t\tclickSettle()\n \t\tsleep(500)\n+\t\tstart()\n \t} else if (hasText('非常抱歉，当前商品运力不足(063)')) {\n \t\t// 返回上一页\n \t\tback()\n+\t\tsleep(500)\n+\t\tstart()\n \t}\n }\n \n start()\n"
                },
                {
                    "date": 1648775443747,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,21 +2,13 @@\n // launchApp(appName);\n // sleep(3000);\n auto.waitFor()\n \n-\n-const hasSettle = id(\"button_cart_charge\").exists() // 结算按钮是否存在\n-\n-// 点击结算按钮\n-const clickSettle = () => {\n-\tconst settle = id(\"button_cart_charge\").findOne() // 结算按钮\n-\tsettle.click();\n+// 点击按钮\n+const clickSettle = (btnId) => {\n+\tid(btnId).findOne().click()\n }\n \n-textStartsWith(\"非常抱歉，当前商品运力不足(063)\").exists() // 是否存在指定文本\n-textStartsWith(\"提交订单\").exists() // 是否存在指定文本\n-textStartsWith(\"结算\").exists() // 是否存在指定文本\n-\n const hasText = (text) => {\n \treturn textStartsWith(text).exists() // 是否存在指定文本\n }\n \n@@ -24,16 +16,18 @@\n const start = () => {\n \t// 是否有结算按钮\n \tif (hasText(\"结算\")) {\n \t\t// 点击结算\n-\t\tclickSettle()\n-\t\tsleep(500)\n+\t\tclickSettle('button_cart_charge')\n+\t\tsleep(1000)\n \t\tstart()\n \t} else if (hasText('非常抱歉，当前商品运力不足(063)')) {\n \t\t// 返回上一页\n \t\tback()\n-\t\tsleep(500)\n+\t\tsleep(1000)\n \t\tstart()\n+\t} else if (hasText('提交订单')) {\n+\t\tclickSettle('button_cart_charge')\n \t}\n }\n \n start()\n"
                },
                {
                    "date": 1648775541927,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,10 +3,10 @@\n // sleep(3000);\n auto.waitFor()\n \n // 点击按钮\n-const clickSettle = (btnId) => {\n-\tid(btnId).findOne().click()\n+const clickSettle = () => {\n+\tid('button_cart_charge').findOne().click()\n }\n \n const hasText = (text) => {\n \treturn textStartsWith(text).exists() // 是否存在指定文本\n@@ -16,9 +16,9 @@\n const start = () => {\n \t// 是否有结算按钮\n \tif (hasText(\"结算\")) {\n \t\t// 点击结算\n-\t\tclickSettle('button_cart_charge')\n+\t\tclickSettle()\n \t\tsleep(1000)\n \t\tstart()\n \t} else if (hasText('非常抱歉，当前商品运力不足(063)')) {\n \t\t// 返回上一页\n"
                },
                {
                    "date": 1648775553428,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,9 +25,9 @@\n \t\tback()\n \t\tsleep(1000)\n \t\tstart()\n \t} else if (hasText('提交订单')) {\n-\t\tclickSettle('button_cart_charge')\n+\t\tclassName(\"android.widget.TextView\").text(\"提交订单\").findOne().parent().click()\n \t}\n }\n \n start()\n"
                },
                {
                    "date": 1648775572663,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,8 +26,10 @@\n \t\tsleep(1000)\n \t\tstart()\n \t} else if (hasText('提交订单')) {\n \t\tclassName(\"android.widget.TextView\").text(\"提交订单\").findOne().parent().click()\n+\t\tsleep(1000)\n+\t\tstart()\n \t}\n }\n \n start()\n"
                },
                {
                    "date": 1648775578330,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,9 +11,8 @@\n const hasText = (text) => {\n \treturn textStartsWith(text).exists() // 是否存在指定文本\n }\n \n-\n const start = () => {\n \t// 是否有结算按钮\n \tif (hasText(\"结算\")) {\n \t\t// 点击结算\n"
                },
                {
                    "date": 1648775584081,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -27,8 +27,10 @@\n \t} else if (hasText('提交订单')) {\n \t\tclassName(\"android.widget.TextView\").text(\"提交订单\").findOne().parent().click()\n \t\tsleep(1000)\n \t\tstart()\n+\t} else {\n+\t\texit()\n \t}\n }\n \n start()\n"
                },
                {
                    "date": 1648775597420,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,8 +28,9 @@\n \t\tclassName(\"android.widget.TextView\").text(\"提交订单\").findOne().parent().click()\n \t\tsleep(1000)\n \t\tstart()\n \t} else {\n+\t\ttoast('停止活动了')\n \t\texit()\n \t}\n }\n \n"
                },
                {
                    "date": 1648775841924,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,9 +18,9 @@\n \t\t// 点击结算\n \t\tclickSettle()\n \t\tsleep(1000)\n \t\tstart()\n-\t} else if (hasText('非常抱歉，当前商品运力不足(063)')) {\n+\t} else if (hasText('非常抱歉，当前商品运力不足(063)') || hasText('很抱歉，下单失败')) {\n \t\t// 返回上一页\n \t\tback()\n \t\tsleep(1000)\n \t\tstart()\n"
                }
            ],
            "date": 1648773273599,
            "name": "Commit-0",
            "content": "// text(\"auto\").waitFor()\n// text(\"发送\").exists()\n// UiSelector.findOne()\n\n// toast(desc('结算').find())\n\nauto.waitFor()\n// var appName = \"盒马\";\n// launchApp(appName);\n// sleep(3000);\n\nconst settle = id(\"button_cart_charge\").findOne() // 结算按钮\n// const settleText = textStartsWith(\"结算\").exists() // 结算按钮是否存在\nconst settleText = id(\"button_cart_charge\").exists() // 结算按钮是否存在\ntoast(settleText)\n// while (true) {\n\t// if (!settle) {\n\t// \ttoast('没找到结算按钮')\n\t// \t// continue\n\t// } else {\n\t// \ttoast('点击结算按钮')\n\t// \tsettle.click();\n\t// \ttoast(settle)\n\t// \tsleep(100);\n\t// }\n// }\n// else {\n// \ttoast(\"未检查到领喵币按钮\");\n// \t//中止脚本\n// \texit();\n// }"
        }
    ]
}